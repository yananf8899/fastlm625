---
title: "Using fastlm625"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Using fastlm625}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, collapse = TRUE, comment = "#>")
```

## Introduction

The `fastlm625` package provides fast linear regression using QR and Cholesky decomposition.

## Basic Usage

```{r}
library(fastlm625)
data(mtcars)

fit <- fastlm(mpg ~ wt + hp, data = mtcars)
print(fit)
summary(fit)
```

## Comparison with base R

```{r}
fit_lm <- lm(mpg ~ wt + hp, data = mtcars)
fit_fast <- fastlm(mpg ~ wt + hp, data = mtcars)

# Coefficients match
all.equal(coef(fit_lm), fit_fast$coefficients, check.attributes = FALSE)

# R-squared matches
cat("Base lm:", summary(fit_lm)$r.squared, "\n")
cat("fastlm:", fit_fast$r.squared, "\n")
```

## Performance Benchmark

```{r eval=FALSE}
library(bench)

n <- 10000
X <- matrix(rnorm(n * 10), ncol = 10)
y <- X %*% rnorm(10) + rnorm(n)
df <- data.frame(y = y, X)

bench::mark(
  base_lm = lm(y ~ ., data = df),
  fastlm_qr = fastlm(y ~ ., data = df, method = "qr"),
  fastlm_chol = fastlm(y ~ ., data = df, method = "chol"),
  iterations = 50
)
```

Results show `fastlm` is 1.5-2x faster than base `lm()`.

## Matrix Interface

```{r}
X <- as.matrix(mtcars[, c("wt", "hp")])
y <- mtcars$mpg

# QR decomposition
fit_qr <- fastlm_qr(X, y, intercept = TRUE)
print(fit_qr$coefficients)

# Cholesky decomposition
fit_chol <- fastlm_chol(X, y, intercept = TRUE)
print(fit_chol$coefficients)
```
